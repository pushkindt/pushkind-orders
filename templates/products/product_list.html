<div class="row d-none d-lg-flex fw-bold">
    <div class="col-lg-1 overflow-hidden">ID</div>
    <div class="col-lg-3 overflow-hidden">Название</div>
    <div class="col-lg-2 overflow-hidden">Артикул</div>
    <div class="col-lg overflow-hidden">Описание</div>
    <div class="col-lg-1 overflow-hidden">Валюта</div>
    <div class="col-lg-2 overflow-hidden">Обновлён</div>
</div>
<div id="productList">
    {% for product in products.items %}
    <div class="row my-1 py-2 border-top selectable
        {% if product.is_archived %} product-archived{% endif %}
    " data-id="{{ product.id }}">
        <div class="col-lg-1 col-12">
            <strong>{{ product.id }}</strong>
            <div class="d-lg-none text-muted small">
                Обновлён {{ product.updated_at | date(format="%Y-%m-%d %H:%M") }}
            </div>
        </div>
        <div class="col-lg-3 col-12">
            <span class="d-lg-none fw-bold">Название:</span>
            {{ product.name }}
        </div>
        <div class="col-lg-2 col-12">
            <span class="d-lg-none fw-bold">Артикул:</span>
            {{ product.sku | default(value="—") }}
        </div>
        <div class="col-lg col-12">
            <span class="d-lg-none fw-bold">Описание:</span>
            {{ product.description | default(value="—") }}
        </div>
        <div class="col-lg-1 col-6">
            <span class="d-lg-none fw-bold">Валюта:</span>
            {{ product.currency }}
        </div>
        <div class="col-lg-2 col-6 text-lg-end">
            <span class="d-lg-none fw-bold">Обновлён:</span>
            {{ product.updated_at | date(format="%Y-%m-%d %H:%M") }}
            {% if product.is_archived %}
                <div class="text-muted small">Архивирован</div>
            {% endif %}
        </div>
        {% if product.price_levels | length > 0 %}
        <div class="col-12 mt-2">
            <div class="d-flex flex-wrap gap-2 small">
                {% for level in product.price_levels %}
                <span class="badge bg-secondary-subtle text-body-secondary border">
                    {{ level.price_level_name }} — {{ level.price_formatted }} {{ product.currency }}
                </span>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
    {% else %}
    <div class="alert alert-warning my-2" role="alert">
        Нет товаров для отображения.
    </div>
    {% endfor %}
</div>

{{ macros::pagination(
    pages=products.pages,
    current_page=products.page,
    search=search | default(value=""),
) }}
