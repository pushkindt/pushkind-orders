{% extends 'base.html' %}

{% block styles %}
<style>
    .order-row {
        align-items: center;
    }

    .order-meta {
        font-size: 0.875rem;
        color: #6c757d;
    }

    .order-status {
        font-weight: 600;
    }
</style>
{% endblock %}

{% block content %}
{% include 'components/navigation.html' %}

<div class="container bg-white border rounded my-2">
    <div class="row py-3 border-bottom">
        <div class="col">
            <h5 class="mb-0">Заказы</h5>
            {% if search %}
            <p class="order-meta mb-0">Поиск: "{{ search }}"</p>
            {% endif %}
        </div>
    </div>

    <div class="row d-none d-md-flex fw-bold text-uppercase small py-2">
        <div class="col-md-2">Идентификатор</div>
        <div class="col-md-3">Ссылка</div>
        <div class="col-md-2">Статус</div>
        <div class="col-md-2">Сумма</div>
        <div class="col-md-3">Создан</div>
    </div>

    <div id="orderList">
        {% for order in orders.items %}
        <div class="row order-row py-2 border-top">
            <div class="col-md-2">
                <strong>{{ order.id }}</strong>
                <div class="d-md-none order-meta">Статус: {{ order.status }}</div>
                <div class="d-md-none order-meta">Сумма: {{ order.total_cents }} {{ order.currency }}</div>
            </div>
            <div class="col-md-3">
                <span class="d-md-none fw-bold">Ссылка:</span>
                {{ order.reference | default(value="—") }}
            </div>
            <div class="col-md-2 d-none d-md-block">
                <span class="order-status">{{ order.status }}</span>
            </div>
            <div class="col-md-2 d-none d-md-block">
                {{ order.total_cents }} {{ order.currency }}
            </div>
            <div class="col-md-3">
                <span class="d-md-none fw-bold">Создан:</span>
                {{ order.created_at }}
            </div>
        </div>
        {% else %}
        <div class="alert alert-warning my-3" role="alert">
            Нет заказов для отображения.
        </div>
        {% endfor %}
    </div>
    {{ macros::pagination(pages=orders.pages) }}
</div>
{% endblock %}
